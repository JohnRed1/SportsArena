<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SportsArena</title>
    <link rel="stylesheet" href="css/bootstrap.css" />
    <link rel="stylesheet" href="css/index.css" />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Raleway:wght@100;200;300;400;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css"
      integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
  </head>
  <body>
    <div class="container-fluid p-0 m-0 bg-secondary-">
      <!-- nav -->

      <header>
        <div class="Header p-3 pe-4">
          <div class="L-and-s">
            <div class="logo">
              <h2>SportsArena</h2>
            </div>
          </div>
          <div class="search-bar">
            <input class="Searchbar" type="text" placeholder="Search" />
            <button class="search-button" onclick="
            searchPost();
            ">
              <span class="material-symbols-outlined"> search </span>
            </button>
          </div>

          <div class="Nav-Link-cont">
            <div class="Nav-links">
              <a href="">Articles</a>
              <a href="Write_for_us.html" id="Write">Write for us</a>
              <a href="Sign_in.html" target="_parent" class="sign-in"
                >Sign In</a
              >
            </div>
            <a href="BookMarks.html" class="BookMarks"> Bookmarks </a>
            <a href="./Get_started.html" target="_parent" class="profile">
              <div class="Get-Started">
                <button>Get Started</button>
              </div>
            </a>
            <p id="So">
              <button><i class="fa fa-sign-out logout"></i></button>
            </p>
          </div>
        </div>
      </header>

      
      

      <!-- tagline -->
      <div class="TagLine-cont">
        <div class="TagLine-Texts">
          <h1>SportsArena</h1>
          <h3>A place where Sports and stories meets</h3>
          <a href="./Get_started.html">
            <div class="Get-Started1">
              <button>Get Started</button>
            </div>
          </a>
        </div>
        <div class="TagLine-img">
          <img src="images/Tagline1-removebg-preview.webp" alt="" />
        </div>
      </div>

    
      <!-- Trending Posts -->

      <!-- snackbar -->
      <div id="empty-field-alert"></div>

      <div class="container">
        <div class="Trending-Posts-cont p-1">
          <div class="pt-5 TP-Heading">
            <div class="TPH-icon">
              <span class="material-symbols-outlined">
                stacked_line_chart
              </span>
            </div>
            <div class="mx-2 TPH-Text">
              <h2>Trending Posts</h2>
            </div>
          </div>
          <div class="Trendings-cont">
            <!-- <div class="Trendings-Posts">
              <div class="TP-counter">
                <h1>1</h1>
              </div>
              <div
                class="TP-Title"
                onclick="
              clickPost();"
              >
                <h3>
                  Arsenal 3 Manchester United 1: Rice delivers, VAR controversy,
                  Hojlund’s lively cameo
                </h3>
              </div>
              <div class="TP-visuals">
                <img
                  src="././images/GettyImages-1642977292-1024x683.webp"
                  alt=""
                />
              </div>
          </div> -->
          </div>
        </div>
      </div>

      <div class="search-results">
        <ul id="search-results-list">
          <!-- Results will be displayed here -->
        
        </ul>
      </div>


      <!-- Recent Posts -->
      <div class="container mt-5 pb-5 mb-5 h-100">
        <div class="Recent-Posts-Cont pt-3 pb-5 h-100">
          <!-- <div class="Recent-Post">
            <div class="RP-visual p-2">
              <img
                src="./images/Declan-Rice-Arsenal-Manchester-United-scaled-e1693779122523-1024x681.webp"
                alt=""
              />
            </div>
            <div
              class="RP-Title p-2"
              onclick="
             clickPost();
            "
            >
              <h2>
                Composure, character, no coincidence: The moment Rice showed why
                Arsenal paid £105m for him
              </h2>
            </div>
            <div class="RP-excerpt p-2">
              <p>
                The big-money signing kept his composure as Arsenal searched for
                a match-winner, showing exactly why he was a key transfer for
                Mikel Arteta
              </p>
            </div>
            <div class="R-P-Author px-2 mt-0 mb-0">
             
                <p  class="Authors-name" >John Red</p>
            

              <p class="Post-Category">Football</p>
            </div>
            <div class="R-P-icons px-3">
              <div class="comments">
                <span class="material-symbols-outlined cs"> mode_comment </span><p>76</p>
                <span class="material-symbols-outlined" id="Like">
                  favorite
                </span><p>5.6k</p>
                
              </div>

              <div class="Bookmark">
                <span class="material-symbols-outlined bookmark"> bookmark </span>
              </div>
            </div>
            
          </div> -->
        </div>
      </div>

      <!-- Footer -->
      <div class="Footer-cont p-3">
        <h2>SportsArena</h2>
        <div class="Footers-links pb-2">
          <a href="#">Privacy Policy</a>
          <a href="#">Support</a>
          <a href="#">Faq</a>
          <a href="#">Terms of Use</a>
          <a href="#">About</a>
        </div>
        <div class="Footers-icons">
          <div class="F-icon">
            <img
              width="48"
              height="48"
              src="https://img.icons8.com/fluency/48/twitterx.png"
              alt="twitterx"
            />
          </div>
          <div class="F-icon">
            <img
              width="48"
              height="48"
              src="https://img.icons8.com/color/48/facebook-new.png"
              alt="facebook-new"
            />
          </div>
          <div class="F-icon">
            <img
              width="48"
              height="48"
              src="https://img.icons8.com/color/48/instagram-new--v1.png"
              alt="instagram-new--v1"
            />
          </div>
        </div>
        <h5>© 2023 SportsArena</h5>
      </div>
    </div>

    <script src="js/myApi.js"></script>
    <script src="js/SportsArena.js"></script>
    <script src="js/curentUser.js"></script>
    <script src="js/bootstrap.bundle.js"></script>
    <script>
      let postTitle = document.querySelectorAll(".RP-Title");
      let postVisual = document.querySelectorAll(".RP-visual");
      let postCategory = document.querySelectorAll(".Post-Category");
      let postExcerpt = document.querySelectorAll(".RP-excerpt");
      let db = JSON.parse(localStorage.getItem("database")) || [];
      let storedSportsData = JSON.parse(localStorage.getItem("sportsData"));
      let recentPostCont = document.querySelector(".Recent-Posts-Cont");
      let trendingPostCont = document.querySelector(".Trendings-cont");
      let maxTrends = 8;
      
      let authorName = document.querySelectorAll(".Authors-name");
      
     
      
      
      
      function loadAuthorPage(event) {
        if (authorName) {
          // let currentAuthor = this.getAttribute('data-title');
          let currentAuthor = event.target.getAttribute('data-title');
      
          console.log("Author clicked");
          window.location.href = "Author's-Page.html?a=" + currentAuthor;
        }
      }
      
      //  Trending post
      
      for (let i = 0; i < maxTrends && i < storedSportsData.length; i++) {
        let aTrendingPost = storedSportsData[i];
        let trendingPost = `
      <div class="Trendings-Posts">
      <div class="TP-counter">
        <h1>${i + 1}</h1>
      </div>
      <div class="TP-Title"
      data-title = ${aTrendingPost.id}
      
      
      >
        <h3>${aTrendingPost.title}</h3>
      </div>
      <div class="TP-visuals">
        <img src='${aTrendingPost.img}'; alt="" />
      </div>
      </div>
      `;
        trendingPostCont.innerHTML += trendingPost;
      }
      
      let trends = document.querySelectorAll(".TP-Title");
      trends.forEach((trend) => {
        trend.addEventListener("click", function () {
          let currentTrend = this.getAttribute("data-title");
      
          window.location.href = "Single-Post.html?a=" + currentTrend;
        });
      });
      
      // Recent Posts
      
      storedSportsData.forEach((aRecentPost) => {
        let recentPost = ` <div class="Recent-Post">
      <div class="RP-visual p-2">
      <img
      src='${aRecentPost.img}';
      alt=""
      />
      </div>
      <div
      class="RP-Title p-2"
      data-title = ${aRecentPost.id}
      >
      <h2>
      ${aRecentPost.title}
      </h2>
      </div>
      <div class="RP-excerpt p-2">
      <p>
      ${aRecentPost.content.split(/[.!?]/).slice(0, 1).join(".")}
      </p>
      </div>
      <div class="R-P-Author px-2 mt-0 mb-0">
      
      <p  class="Authors-name"  onclick="loadAuthorPage(event);"
            data-title = ${aRecentPost.id}>
       ${aRecentPost.author}
      </p>
      
      
      <p class="Post-Category">${aRecentPost.category}
      </p>
      </div>
      <div class="R-P-icons px-3">
      <div class="comments">
      <span class="material-symbols-outlined cs"
      data-comment = ${aRecentPost.id}
      > mode_comment </span><p>76</p>
      <span class="material-symbols-outlined" id="Like">
        favorite
      </span><p>5.6k</p>
      
      </div>
      
      <div class="Bookmark">
      <span class="material-symbols-outlined bookmark"> bookmark </span>
      </div>
      </div>
      
      </div>`;
      
        recentPostCont.innerHTML += recentPost;
      });

      let comments = document.querySelectorAll('.cs');
      comments.forEach((comment) =>{
        comment.addEventListener('click', function(){

          let currentComment = this.getAttribute('data-comment');

          window.location.href = "Single-Post.html?a=" + currentComment;


        });

      }) 

      
      let titles = document.querySelectorAll(".RP-Title");
      titles.forEach((title) => {
        title.addEventListener("click", function () {
          let currentTitle = this.getAttribute("data-title");
      
          window.location.href = "Single-Post.html?a=" + currentTitle;
        });
      });
      
        // let searchBtn = document.querySelector('.search-button');
        // searchBtn.addEventListener('click', searchPost);



  function searchPost(){
  let searchQuery = document.querySelector('.Searchbar').value.toLowerCase();
  console.log(searchQuery);

  const searchResultsContainer = document.querySelector(".search-results");
  const searchResultsList = document.getElementById("search-results-list");

  searchResultsList.innerHTML = '';

  const filteredPosts = storedSportsData.filter((post) => {
    const title = post.title.toLowerCase();
    return title.includes(searchQuery);
  });


  if (filteredPosts.length > 0) {
    searchResultsContainer.style.display = 'block'; 

    filteredPosts.forEach((aRecentPost) => {
      const resultItem = document.createElement('li'); 
      const link = document.createElement('a'); 

      link.href = `Single-Post.html?a=${aRecentPost.id}`;
      link.textContent = aRecentPost.title;

      resultItem.appendChild(link); 
      searchResultsList.appendChild(resultItem); 
    });
  } else {
    searchResultsContainer.style.display = 'none'; 
  }
}

      
      
      </script>
   
  </body>
</html>
